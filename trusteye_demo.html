<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustEye - AI Threat Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .navbar-brand {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .logo-icon {
            font-size: 2rem;
            margin-right: 0.5rem;
        }
        
        .hero-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .main-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            margin-top: -50px;
            position: relative;
            z-index: 10;
        }
        
        .scan-btn, .demo-btn {
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .scan-btn {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
        }
        
        .demo-btn {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .scan-btn:hover, .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }
        
        .risk-indicator {
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }
        
        .risk-critical {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 2px solid #dc2626;
            color: #dc2626;
        }
        
        .risk-high {
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            border: 2px solid #ef4444;
            color: #ef4444;
        }
        
        .risk-medium {
            background: linear-gradient(135deg, #fff7ed, #fef3c7);
            border: 2px solid #f59e0b;
            color: #f59e0b;
        }
        
        .risk-low {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border: 2px solid #10b981;
            color: #10b981;
        }
        
        .risk-score {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .risk-level {
            font-size: 1.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .threat-badge {
            background: #f59e0b;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin: 0.25rem;
            display: inline-block;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .stats-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2563eb;
        }
        
        .sample-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .sample-card:hover {
            background: #e9ecef;
            border-color: #2563eb;
            transform: translateY(-2px);
        }
        
        .sample-card.active {
            background: #e3f2fd;
            border-color: #2563eb;
        }
        
        .sample-title {
            font-weight: 600;
            color: #2563eb;
            margin-bottom: 0.5rem;
        }
        
        .sample-preview {
            font-size: 0.9rem;
            color: #6c757d;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .demo-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .footer {
            background: #1e293b;
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <span class="logo-icon">üëÅÔ∏è</span>TrustEye
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#scanner">Scanner</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#demo">Demo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">üëÅÔ∏è TrustEye</h1>
            <p class="hero-subtitle">AI-Powered Cybersecurity Threat Detection</p>
            <p class="mt-3">Protect yourself from phishing attacks with advanced machine learning</p>
        </div>
    </section>

    <!-- Main Scanner -->
    <section id="scanner" class="container">
        <div class="main-card p-5">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <h2 class="text-center mb-4">
                        <i class="fas fa-shield-alt text-primary me-2"></i>
                        Threat Scanner
                    </h2>

                    <!-- Demo Section -->
                    <div id="demo" class="demo-section">
                        <h5 class="mb-3">
                            <i class="fas fa-play-circle text-success me-2"></i>
                            Try Demo Samples
                        </h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="sample-card" onclick="loadRandomSample('phishing')">
                                    <div class="sample-title">üö® Phishing Email</div>
                                    <div class="sample-preview" id="phishing-preview">Click to load random phishing email...</div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="sample-card" onclick="loadRandomSample('suspicious-url')">
                                    <div class="sample-title">üîó Suspicious URL</div>
                                    <div class="sample-preview" id="url-preview">Click to load random suspicious URL...</div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-success demo-btn" onclick="runDemo()">
                                <i class="fas fa-magic me-2"></i>Run Demo Scan
                            </button>
                        </div>
                    </div>

                    <form id="scanForm">
                        <div class="mb-4">
                            <label for="textInput" class="form-label">
                                <i class="fas fa-envelope text-primary"></i> Suspicious Text or Email
                            </label>
                            <textarea class="form-control" id="textInput" rows="4" 
                                placeholder="Paste suspicious email content, SMS message, or any text here..."></textarea>
                        </div>

                        <div class="mb-4">
                            <label for="urlInput" class="form-label">
                                <i class="fas fa-link text-primary"></i> Suspicious URL
                            </label>
                            <input type="url" class="form-control" id="urlInput" 
                                placeholder="https://suspicious-website.com">
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary scan-btn">
                                <i class="fas fa-search me-2"></i>Scan with TrustEye
                            </button>
                        </div>
                    </form>

                    <!-- Results Section -->
                    <div id="results" class="mt-4" style="display: none;">
                        <div id="riskIndicator" class="risk-indicator">
                            <div id="riskScore" class="risk-score">0%</div>
                            <div id="riskLevel" class="risk-level">Safe</div>
                            <div class="mt-3">
                                <small><i class="fas fa-clock"></i> Analysis completed</small>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <div id="confidenceValue" class="stat-value">85%</div>
                                    <div class="text-muted">Confidence</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <div id="threatCount" class="stat-value">0</div>
                                    <div class="text-muted">Threats Found</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <div class="stat-value"><i class="fas fa-robot"></i></div>
                                    <div class="text-muted">AI Analysis</div>
                                </div>
                            </div>
                        </div>

                        <div id="threatsSection" class="mt-4">
                            <h5><i class="fas fa-exclamation-triangle text-warning"></i> Detected Threats:</h5>
                            <div id="threatsList"></div>
                        </div>

                        <div class="text-center mt-4">
                            <button class="btn btn-outline-secondary me-2" onclick="clearResults()">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                            <button class="btn btn-primary" onclick="scanAnother()">
                                <i class="fas fa-redo"></i> Scan Another
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>
                        <span class="logo-icon">üëÅÔ∏è</span>TrustEye
                    </h5>
                    <p class="text-muted">AI-Powered Cybersecurity Threat Detection System</p>
                    <p class="text-muted">SIH PS1 - Smart India Hackathon Project</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h6>Features</h6>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Text Analysis</li>
                        <li><i class="fas fa-check text-success"></i> URL Scanning</li>
                        <li><i class="fas fa-check text-success"></i> Demo Samples</li>
                        <li><i class="fas fa-check text-success"></i> Risk Assessment</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 TrustEye. Built for Smart India Hackathon.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Multiple sample data arrays for randomization
        const phishingEmails = [
            {
                text: 'URGENT SECURITY ALERT! Your account will be suspended in 24 hours due to suspicious activity detected from an unknown device. Click here immediately to verify your identity and secure your account. Failure to verify within 24 hours will result in permanent account closure.',
                url: 'http://secure-bank-verify.fake-domain.com/urgent-login',
                preview: 'URGENT SECURITY ALERT! Your account will be suspended...'
            },
            {
                text: 'Your PayPal account has been temporarily limited due to unusual activity. To restore full access, please verify your account information immediately by clicking the link below. This security measure expires in 48 hours.',
                url: 'http://paypal-security-update.malicious.org/verify-account',
                preview: 'Your PayPal account has been temporarily limited...'
            },
            {
                text: 'FINAL NOTICE: Your subscription will expire today! Your account will be deactivated unless you update your payment method immediately. Click here to avoid service interruption and additional fees.',
                url: 'http://subscription-renewal.fake-service.net/update-payment',
                preview: 'FINAL NOTICE: Your subscription will expire today...'
            },
            {
                text: 'Security breach detected on your Microsoft account! Unauthorized access attempted from Russia. Secure your account now by verifying your identity. Act immediately to prevent data theft.',
                url: 'http://microsoft-security-alert.suspicious.com/secure-account',
                preview: 'Security breach detected on your Microsoft account...'
            },
            {
                text: 'Your credit card has been charged $499.99 for premium software. If you did not authorize this transaction, click here immediately to dispute the charge and secure your account.',
                url: 'http://dispute-charge.fake-bank.org/cancel-transaction',
                preview: 'Your credit card has been charged $499.99...'
            },
            {
                text: 'IRS TAX REFUND: You are eligible for a $2,847 tax refund. Click here to claim your refund before the deadline expires. Provide your SSN and bank details for direct deposit.',
                url: 'http://irs-refund-claim.gov-fake.net/claim-refund',
                preview: 'IRS TAX REFUND: You are eligible for a $2,847...'
            }
        ];

        const suspiciousUrls = [
            {
                text: 'Please update your payment information to continue using our services.',
                url: 'http://192.168.1.100/paypal-update/login.php?redirect=secure-verify',
                preview: 'IP address with fake PayPal login page...'
            },
            {
                text: 'Your account requires immediate verification.',
                url: 'http://172.16.0.50/amazon-verify/account-security/login.html',
                preview: 'Private IP with fake Amazon verification...'
            },
            {
                text: 'Click here to access your secure banking portal.',
                url: 'http://10.0.0.25/secure-banking-login/verify-identity.php',
                preview: 'Local IP with fake banking portal...'
            },
            {
                text: 'Verify your identity to continue.',
                url: 'http://bit.ly/urgent-bank-verify-2024',
                preview: 'Shortened URL for bank verification...'
            },
            {
                text: 'Update your account settings.',
                url: 'http://tinyurl.com/microsoft-account-update',
                preview: 'Shortened URL for Microsoft account...'
            },
            {
                text: 'Secure your account now.',
                url: 'http://secure-login-verify-account-update-now.suspicious-domain.ru/login',
                preview: 'Suspicious domain with multiple keywords...'
            },
            {
                text: 'Complete your profile verification.',
                url: 'http://facebook-security-verify-login-update.fake-social.tk/verify',
                preview: 'Fake social media verification page...'
            },
            {
                text: 'Download your tax documents.',
                url: 'http://irs-documents-download-secure.gov-imposter.ml/download.exe',
                preview: 'Fake government site with executable download...'
            }
        ];

        let currentSample = null;
        let lastPhishingIndex = -1;
        let lastUrlIndex = -1;

        function getRandomSample(array, lastIndex) {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * array.length);
            } while (randomIndex === lastIndex && array.length > 1);
            return { sample: array[randomIndex], index: randomIndex };
        }

        function loadRandomSample(type) {
            // Clear previous active states
            document.querySelectorAll('.sample-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Set active state
            event.target.closest('.sample-card').classList.add('active');
            
            let sample, preview;
            
            if (type === 'phishing') {
                const result = getRandomSample(phishingEmails, lastPhishingIndex);
                sample = result.sample;
                lastPhishingIndex = result.index;
                preview = document.getElementById('phishing-preview');
            } else if (type === 'suspicious-url') {
                const result = getRandomSample(suspiciousUrls, lastUrlIndex);
                sample = result.sample;
                lastUrlIndex = result.index;
                preview = document.getElementById('url-preview');
            }
            
            if (sample) {
                document.getElementById('textInput').value = sample.text;
                document.getElementById('urlInput').value = sample.url;
                preview.textContent = sample.preview;
                currentSample = type;
                
                // Show "NEW" indicator
                showNewIndicator(event.target.closest('.sample-card'));
            }
        }

        function showNewIndicator(card) {
            // Remove existing NEW badges
            document.querySelectorAll('.new-badge').forEach(badge => badge.remove());
            
            // Add NEW badge
            const newBadge = document.createElement('span');
            newBadge.className = 'badge bg-success new-badge';
            newBadge.textContent = 'NEW';
            newBadge.style.position = 'absolute';
            newBadge.style.top = '10px';
            newBadge.style.right = '10px';
            newBadge.style.fontSize = '0.7rem';
            
            card.style.position = 'relative';
            card.appendChild(newBadge);
            
            // Remove badge after 3 seconds
            setTimeout(() => {
                if (newBadge.parentNode) {
                    newBadge.remove();
                }
            }, 3000);
        }

        // Legacy function for backward compatibility
        function loadSample(type) {
            loadRandomSample(type);
        }

        // Client-side threat analysis
        function analyzeThreat(text = "", url = "") {
            let riskScore = 0.0;
            let threats = [];
            
            if (text) {
                const textLower = text.toLowerCase();
                const keywords = [
                    'urgent', 'click here', 'verify', 'suspended', 'winner', 'congratulations', 
                    'act now', 'expires', 'claim', 'free money', 'lottery', 'selected',
                    'bank details', 'immediate', 'failure to', 'unknown device', 'security alert'
                ];
                const found = keywords.filter(kw => textLower.includes(kw));
                if (found.length > 0) {
                    riskScore += found.length * 0.12;
                    threats.push(...found.slice(0, 5)); // Limit to 5 keywords
                }
            }
            
            if (url) {
                if (/\d+\.\d+\.\d+\.\d+/.test(url)) {
                    riskScore += 0.4;
                    threats.push('IP address detected');
                }
                if (['bit.ly', 'tinyurl', 'goo.gl', 't.co'].some(domain => url.toLowerCase().includes(domain))) {
                    riskScore += 0.3;
                    threats.push('URL shortener detected');
                }
                if (['secure', 'verify', 'update', 'login', 'bank', 'paypal'].some(word => url.toLowerCase().includes(word))) {
                    riskScore += 0.2;
                    threats.push('Suspicious URL keywords');
                }
                if (url.includes('fake-domain') || url.includes('suspicious')) {
                    riskScore += 0.3;
                    threats.push('Suspicious domain detected');
                }
            }
            
            riskScore = Math.min(0.95, riskScore);
            
            return {
                combined_score: riskScore,
                risk_level: riskScore > 0.8 ? 'Critical' : riskScore > 0.6 ? 'High' : riskScore > 0.3 ? 'Medium' : 'Low',
                is_threat: riskScore > 0.5,
                confidence: 0.85,
                threat_indicators: [...new Set(threats)] // Remove duplicates
            };
        }

        function loadSample(type) {
            // Clear previous active states
            document.querySelectorAll('.sample-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Set active state
            event.target.closest('.sample-card').classList.add('active');
            
            const sample = samples[type];
            document.getElementById('textInput').value = sample.text;
            document.getElementById('urlInput').value = sample.url;
            currentSample = type;
        }

        function runDemo() {
            if (!currentSample) {
                // Load random phishing sample by default
                loadRandomSample('phishing');
            }
            
            // Automatically run scan
            const scanBtn = document.querySelector('.scan-btn');
            scanBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Running Demo...';
            scanBtn.disabled = true;
            
            setTimeout(() => {
                const text = document.getElementById('textInput').value.trim();
                const url = document.getElementById('urlInput').value.trim();
                const result = analyzeThreat(text, url);
                displayResults(result);
                
                scanBtn.innerHTML = '<i class="fas fa-search me-2"></i>Scan with TrustEye';
                scanBtn.disabled = false;
                
                // Show demo completion message
                setTimeout(() => {
                    alert('üéâ Demo completed! Click samples again for NEW content each time!');
                }, 1000);
            }, 2000);
        }

        document.getElementById('scanForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const text = document.getElementById('textInput').value.trim();
            const url = document.getElementById('urlInput').value.trim();
            
            if (!text && !url) {
                alert('Please enter text or URL to analyze, or try a demo sample!');
                return;
            }
            
            const scanBtn = document.querySelector('.scan-btn');
            scanBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Analyzing...';
            scanBtn.disabled = true;
            
            setTimeout(() => {
                const result = analyzeThreat(text, url);
                displayResults(result);
                
                scanBtn.innerHTML = '<i class="fas fa-search me-2"></i>Scan with TrustEye';
                scanBtn.disabled = false;
            }, 1500);
        });
        
        function displayResults(result) {
            const results = document.getElementById('results');
            const riskScore = Math.round(result.combined_score * 100);
            const riskLevel = result.risk_level.toLowerCase();
            
            // Update risk indicator
            const riskIndicator = document.getElementById('riskIndicator');
            riskIndicator.className = `risk-indicator risk-${riskLevel}`;
            
            document.getElementById('riskScore').textContent = riskScore + '%';
            document.getElementById('riskLevel').textContent = result.risk_level;
            
            // Update stats
            document.getElementById('confidenceValue').textContent = Math.round(result.confidence * 100) + '%';
            document.getElementById('threatCount').textContent = result.threat_indicators.length;
            
            // Update threats
            const threatsList = document.getElementById('threatsList');
            if (result.threat_indicators.length > 0) {
                threatsList.innerHTML = result.threat_indicators.map(threat => 
                    `<span class="threat-badge">${threat}</span>`
                ).join('');
                document.getElementById('threatsSection').style.display = 'block';
            } else {
                document.getElementById('threatsSection').style.display = 'none';
            }
            
            results.style.display = 'block';
            results.scrollIntoView({ behavior: 'smooth' });
        }
        
        function clearResults() {
            document.getElementById('results').style.display = 'none';
            document.querySelectorAll('.sample-card').forEach(card => {
                card.classList.remove('active');
            });
            currentSample = null;
        }
        
        function scanAnother() {
            document.getElementById('textInput').value = '';
            document.getElementById('urlInput').value = '';
            clearResults();
        }

        // Auto-load random sample on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                loadRandomSample('phishing');
            }, 1000);
        });
    </script>
</body>
</html>
